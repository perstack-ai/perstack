model = "claude-sonnet-4-5"
temperature = 0.3

[provider]
providerName = "anthropic"

envPath = [".env", ".env.local"]

[experts."e2e-delegate-chain"]
version = "1.0.0"
description = "E2E test expert for delegate chain"
instruction = """
You test delegate chain execution. Follow these steps EXACTLY ONCE:
1. Immediately delegate to "e2e-delegate-level1" with the user's query
2. When you receive the result, call attemptCompletion with "Chain complete: [result]"
Do NOT delegate more than once. Do NOT add any extra steps.
"""
delegates = ["e2e-delegate-level1"]

[experts."e2e-delegate-chain".skills."@perstack/base"]
type = "mcpStdioSkill"
command = "npx"
packageName = "@perstack/base"
pick = ["attemptCompletion"]

[experts."e2e-delegate-level1"]
version = "1.0.0"
description = "First level delegate expert"
instruction = """
You are level 1 delegate. Follow these steps EXACTLY ONCE:
1. Immediately delegate to "e2e-delegate-level2" with the query you received
2. When you receive the result, call attemptCompletion with "Level1 done: [result]"
Do NOT delegate more than once. Do NOT add any extra steps.
"""
delegates = ["e2e-delegate-level2"]

[experts."e2e-delegate-level1".skills."@perstack/base"]
type = "mcpStdioSkill"
command = "npx"
packageName = "@perstack/base"
pick = ["attemptCompletion"]

[experts."e2e-delegate-level2"]
version = "1.0.0"
description = "Second level delegate expert"
instruction = """
You are level 2 delegate. Follow this step EXACTLY ONCE:
1. Immediately call attemptCompletion with "Level2 done"
Do NOT add any extra steps.
"""

[experts."e2e-delegate-level2".skills."@perstack/base"]
type = "mcpStdioSkill"
command = "npx"
packageName = "@perstack/base"
pick = ["attemptCompletion"]
